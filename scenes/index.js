////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////// MODULE PREREQUISITS //////////////////////////////////////////////////////////////////////////////

const fs = require('fs');
const path = require('path');
const dir = module.path || module.filename && path.dirname(module.filename) || module.id && path.dirname(module.id)
const stage = new (require('telegraf/stage'))(

    fs.readdirSync(dir)
        .filter(f => f.match(/\.js$/))
        .filter(f => f !== 'index.js')
        .map(f => require(`./${f}`))
    );

////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////// MODULE EXPORTS ///////////////////////////////////////////////////////////////////////////////////

module.exports = stage